<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator Medis - Murni Teguh Memorial Hospital</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="mode-psi">
    <div class="container">
        <div class="header-container">
            <img src="https://github.com/didasar91/PSI-Score-Calculator/blob/main/header.jpg?raw=true" alt="Murni Teguh" class="header-image">
        </div>

        <div class="menu-container screen-only">
            <button onclick="showCalculator('psi')" id="btn-psi" class="btn-tab active">PSI Score</button>
            <button onclick="showCalculator('natrium')" id="btn-natrium" class="btn-tab">Koreksi Natrium</button>
            <button onclick="showCalculator('kalium')" id="btn-kalium" class="btn-tab">Koreksi Kalium</button>
        </div>

        <div class="patient-total-wrapper">
            <div class="patient-info">
                <div class="info-line"><span class="label">Nama</span><span>:</span><span id="displayNama">-</span></div>
                <div class="info-line"><span class="label">No. MR</span><span>:</span><span id="displayNoMR">-</span></div>
                <div class="info-line"><span class="label">Tgl Lahir</span><span>:</span><span id="displayTglLahir">-</span></div>
                <div class="info-line"><span class="label">Umur</span><span>:</span><span id="displayUmur">-</span></div>
                <div class="info-line"><span class="label">Tgl Assessment</span><span>:</span><span id="displayTglAsesmen">-</span></div>
            </div>

            <div id="psi-output-box" class="output-box green-box">
                <div class="output-title">PSI Score</div>
                <div class="output-value" id="totalScore">0</div>
                <div class="output-label">Kelas: <span id="kelasRisiko">-</span></div>
                <div class="output-label" style="font-size: 11px;">Mortality: <span id="mortalityRate">-</span></div>
            </div>

            <div id="natrium-output-box" class="output-box green-box">
                <div class="output-title">Delta Na+</div>
                <div class="output-value"><span id="displayDeltaTotal">0</span> <small>mEq</small></div>
                <div class="output-label"><span id="displayNaAwal">0</span> &rarr; <span id="displayNaTarget">0</span></div>
            </div>

            <div id="kalium-output-box" class="output-box green-box">
                <div class="output-title">Kebutuhan KCl</div>
                <div class="output-value"><span id="displayKebutuhanK">0</span> <small>mEq</small></div>
                <div class="output-label"><span id="displayKaliumSerum">0</span> &rarr; <span id="displayKTarget">0</span></div>
                <div class="output-label" style="font-size: 11px;">Delta: <span id="displayDeltaK">0</span></div>
            </div>
        </div>

        <div class="input-form screen-only">
            <div class="form-group"><label>Nama Pasien*:</label><input type="text" id="nama"></div>
            <div class="form-group"><label>No. MR (10 Digit)*:</label><input type="text" id="noMR" maxlength="10"></div>
            <div class="form-group"><label>Tgl Lahir*:</label><input type="date" id="tglLahir"></div>
            <div class="form-group"><label>Jenis Kelamin*:</label><select id="jk"><option value="L">Laki-laki</option><option value="P">Perempuan</option></select></div>
            <div class="form-group"><label>Tgl Assessment*:</label><input type="date" id="tglAsesmen"></div>
            <div class="form-group"><label>Berat Badan (kg)*:</label><input type="number" id="bb"></div>
            
            <div id="input-psi-group" style="display:contents;">
                <div class="form-section-title">Riwayat & Komorbiditas</div>
                <div class="checkbox-grid">
                    <label><input type="checkbox" class="psi-check" data-score="30" data-id="cancer"> Keganasan (+30)</label>
                    <label><input type="checkbox" class="psi-check" data-score="20" data-id="liver"> Penyakit Hati (+20)</label>
                    <label><input type="checkbox" class="psi-check" data-score="10" data-id="hf"> Gagal Jantung (+10)</label>
                    <label><input type="checkbox" class="psi-check" data-score="10" data-id="cvd"> Cerebrovascular (+10)</label>
                    <label><input type="checkbox" class="psi-check" data-score="10" data-id="renal"> Penyakit Ginjal (+10)</label>
                    <label><input type="checkbox" class="psi-check" data-score="10" data-id="nursing"> Nursing Home (+10)</label>
                </div>
                <div class="form-section-title">Pemeriksaan Fisik</div>
                <div class="checkbox-grid">
                    <label><input type="checkbox" class="psi-check" data-score="20" data-id="ams"> Ggn Kesadaran (+20)</label>
                    <label><input type="checkbox" class="psi-check" data-score="20" data-id="rr"> RR ≥30 x/m (+20)</label>
                    <label><input type="checkbox" class="psi-check" data-score="20" data-id="sys"> SBP <90 mmHg (+20)</label>
                    <label><input type="checkbox" class="psi-check" data-score="10" data-id="temp"> Suhu <35 / >40 (+10)</label>
                    <label><input type="checkbox" class="psi-check" data-score="10" data-id="pulse"> Nadi ≥125 x/m (+10)</label>
                </div>
                <div class="form-section-title">Laboratorium & Radiologi</div>
                <div class="checkbox-grid">
                    <label><input type="checkbox" class="psi-check" data-score="30" data-id="ph"> pH <7.35 (+30)</label>
                    <label><input type="checkbox" class="psi-check" data-score="20" data-id="bun"> BUN >30 (+20)</label>
                    <label><input type="checkbox" class="psi-check" data-score="20" data-id="na"> Na <130 (+20)</label>
                    <label><input type="checkbox" class="psi-check" data-score="10" data-id="glu"> GDS >250 (+10)</label>
                    <label><input type="checkbox" class="psi-check" data-score="10" data-id="hct"> Hct <30% (+10)</label>
                    <label><input type="checkbox" class="psi-check" data-score="10" data-id="po2"> pO2 <60 (+10)</label>
                    <label><input type="checkbox" class="psi-check" data-score="10" data-id="pleural"> Efusi Pleura (+10)</label>
                </div>
            </div>

            <div id="input-natrium-group" style="display:none; display:contents;">
                <div class="form-group"><label>Na Serum Awal:</label><input type="number" id="naSerum"></div>
                <div class="form-group"><label>Target Na:</label><input type="number" id="naTarget" value="135"></div>
                <div class="form-group"><label>Cairan Infus:</label>
                    <select id="naInfus"><option value="513">NaCl 3%</option><option value="154">NaCl 0.9%</option></select>
                </div>
                <div class="form-group"><label>Max Koreksi (mEq/24h):</label><input type="number" id="naKecepatan" value="8"></div>
            </div>

            <div id="input-kalium-group" style="display:none; display:contents;">
                <div class="form-group"><label>K Serum Awal:</label><input type="number" id="kSerum" step="0.1"></div>
                <div class="form-group"><label>Target K:</label><input type="number" id="kTarget" step="0.1" value="3.0"></div>
                <div class="form-group"><label>Akses Vena:</label>
                    <select id="aksesVena"><option value="perifer">Vena Perifer</option><option value="sentral">Vena Sentral</option></select>
                </div>
            </div>
        </div>

        <div id="calc-psi-content" class="calc-content"></div>
        <div id="calc-natrium-content" class="calc-content" style="display:none;"><div id="natrium-tables-container"></div></div>
        <div id="calc-kalium-content" class="calc-content" style="display:none;">
            <div id="kalium-result-table"><table class="scoring-table"><thead><tr><th>Rencana Tata Laksana</th><th>Instruksi Klinis</th></tr></thead><tbody id="kalium-instructions"></tbody></table></div>
        </div>

        <div class="footer-section">
            <div class="button-container screen-only">
                <button onclick="printAndDownload()" class="btn-action btn-print">Print / Save PDF</button>
                <button onclick="location.reload()" class="btn-action btn-clear">Clear</button>
            </div>
            <div class="dpjp-section">
                <p>Medan, <span id="displayTanggalPrint"></span></p>
                <p>Diketahui oleh,</p>
                <input type="text" id="inputDPJP" placeholder="Nama Dokter*" class="screen-only dpjp-input">
                <div id="displayDPJP" class="dpjp-name"></div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
